App\backend-flask-app\app.py:
```python
importos
importtempfile
importpandasaspd
fromflaskimportFlask,request,jsonify,send_file
fromflask_corsimportCORS
fromdotenvimportload_dotenv
fromdss_parserimportread_dss_data
fromdatabaseimportdb,init_db,AlertThreshold,AlertLog
load_dotenv()
app=Flask(__name__)
init_db(app)
CORS(app,origins=["http://localhost:3000"])
last_dss_file_path=None
UPLOAD_FOLDER=os.path.join(tempfile.gettempdir(),'uploads')
os.makedirs(UPLOAD_FOLDER,exist_ok=True)
@app.route('/test-db')
deftest_db_connection():
try:
count=db.session.query(AlertThreshold).count()
returnjsonify({"message":f"Successfullyconnectedtothedatabase.Found{count}alertthresholds."}),200
exceptExceptionase:
returnjsonify({"error":f"Failedtoconnecttothedatabase:{str(e)}"}),500
@app.route('/')
defhello_world():
return'Hello,World!ThisisyourFlaskBackend.'
@app.route('/api/upload-dss',methods=['POST'])
defupload_dss():
"""
HandlesDSSfileupload,savesit,andextractsdata.
"""
globallast_dss_file_path
if'file'notinrequest.files:
returnjsonify({'error':'Nofilepartintherequest'}),400
file=request.files['file']
iffile.filename=='':
returnjsonify({'error':'Noselectedfile'}),400
iffile:
try:
filename=file.filename
file_path=os.path.join(UPLOAD_FOLDER,filename)
file.save(file_path)
last_dss_file_path=file_path
dss_path="/Panchganga/RajaramBridge/FLOW/01Jan2021/1Day/ObservedDischarge/"
extracted_data=read_dss_data(file_path,dss_path)
ifnotextracted_data:
returnjsonify({'error':'FailedtoextractdatafromtheDSSfile.Checkthefilepathandinternaldatapath.'}),500
returnjsonify({
'message':'Fileuploadedanddataextractedsuccessfully!',
'data':extracted_data
}),200
exceptExceptionase:
returnjsonify({'error':f'Aninternalservererroroccurred:{str(e)}'}),500
@app.route('/api/download-csv',methods=['GET'])
defdownload_csv():
"""
ConvertsextracteddatatoCSVandprovidesitfordownload.
"""
globallast_dss_file_path
ifnotlast_dss_file_pathornotos.path.exists(last_dss_file_path):
returnjsonify({'error':'NoDSSfilehasbeenprocessedyet.'}),404
try:
dss_path="/Panchganga/RajaramBridge/FLOW/01Jan2021/1Day/ObservedDischarge/"
extracted_data=read_dss_data(last_dss_file_path,dss_path)
ifnotextracted_data:
returnjsonify({'error':'Failedtore-processdatafordownload.'}),500
df=pd.DataFrame(extracted_data)
csv_string=df.to_csv(index=False)
output_file_path=os.path.join(tempfile.gettempdir(),'discharge_data.csv')
withopen(output_file_path,'w',newline='')asf:
f.write(csv_string)
returnsend_file(
output_file_path,
mimetype='text/csv',
as_attachment=True,
download_name='discharge_data.csv'
)
exceptExceptionase:
returnjsonify({'error':f'Aninternalservererroroccurred:{str(e)}'}),500
@app.route('/api/trigger-placeholder-alert',methods=['POST'])
deftrigger_placeholder_alert():
"""
Aplaceholderendpointtosimulateanalerttrigger.
"""
try:
new_alert=AlertLog(
location_name="RajaramBridge",
parameter="FLOW",
triggered_value=99999.99,
threshold_value=50000.0,
log_message="Simulatedalerttriggeredfortestingpurposes."
)
db.session.add(new_alert)
db.session.commit()
returnjsonify({
'message':'Placeholderalertsuccessfullyloggedtothedatabase!'
}),200
exceptExceptionase:
db.session.rollback()
returnjsonify({'error':f'Failedtotriggerplaceholderalert:{str(e)}'}),500
if__name__=='__main__':
withapp.app_context():
db.create_all()
ifnotAlertThreshold.query.first():
initial_threshold=AlertThreshold(
location_name="RajaramBridge",
parameter="FLOW",
threshold_value=50000.0,
is_active=True
)
db.session.add(initial_threshold)
db.session.commit()
print("Initialalertthresholdaddedtothedatabase.")
app.run(debug=True,port=5000)
```

App\backend-flask-app\database.py:
```python
importos
fromdotenvimportload_dotenv
fromflask_sqlalchemyimportSQLAlchemy
fromflaskimportFlask
load_dotenv()
db=SQLAlchemy()
definit_db(app:Flask):
"""
InitializesthedatabaseconnectionwiththeFlaskapplication.
"""
app.config["SQLALCHEMY_DATABASE_URI"]=os.getenv("DATABASE_URI")
app.config["SQLALCHEMY_TRACK_MODIFICATIONS"]=False
db.init_app(app)
classAlertThreshold(db.Model):
"""
Modelforstoringfloodalertthresholds.
"""
__tablename__='alert_thresholds'
id=db.Column(db.Integer,primary_key=True)
location_name=db.Column(db.String(100),nullable=False)
parameter=db.Column(db.String(50),nullable=False)
threshold_value=db.Column(db.Float,nullable=False)
is_active=db.Column(db.Boolean,default=True,nullable=False)
def__repr__(self):
returnf'<AlertThreshold{self.location_name}-{self.parameter}>'
classAlertLog(db.Model):
"""
Modelforloggingtriggeredalerts.
"""
__tablename__='alert_log'
id=db.Column(db.Integer,primary_key=True)
timestamp=db.Column(db.DateTime,server_default=db.func.now())
location_name=db.Column(db.String(100),nullable=False)
parameter=db.Column(db.String(50),nullable=False)
triggered_value=db.Column(db.Float,nullable=False)
threshold_value=db.Column(db.Float,nullable=False)
log_message=db.Column(db.Text,nullable=False)
is_resolved=db.Column(db.Boolean,default=False)
def__repr__(self):
returnf'<AlertLog{self.location_name}-{self.timestamp}>'
```

App\backend-flask-app\dss_parser.py:
```python
fromhecdssimportHecDss
importpandasaspd
importlogging
importmatplotlib.pyplotasplt
logging.basicConfig(level=logging.INFO,format='%(asctime)s-%(levelname)s-%(message)s')
defread_dss_data(dss_file_path:str,dss_path:str)->list:
"""
Readstime-seriesdatafromaDSSfileforaspecificpath.
Args:
dss_file_path:ThepathtotheDSSfile.
dss_path:Thefullpathtothetime-seriesdatawithintheDSSfile.
Returns:
Alistofdictionarieswith'timestamp'and'value'foreachdatapoint.
"""
try:
withHecDss(dss_file_path)asdss_file:
ts=dss_file.get(dss_path)
iftsisNone:
raiseValueError(f"Nodatafoundforpath:{dss_path}")
logging.info(f"Successfullyreaddataforpath:{dss_path}")
df=pd.DataFrame({
'timestamp':ts.times,
'value':ts.values
})
ifdf.empty:
raiseValueError("ExtractedDataFrameisempty.")
data_list=df.to_dict('records')
logging.info("Datasuccessfullyconvertedtolistofdictionaries.")
returndata_list
exceptFileNotFoundError:
logging.error(f"Error:DSSfilenotfoundat{dss_file_path}")
return[]
exceptValueErrorasve:
logging.error(f"Dataextractionerror:{ve}")
return[]
exceptExceptionase:
logging.error(f"Anunexpectederroroccurred:{e}")
return[]
if__name__=="__main__":
test_dss_file_path="Rajaram_Bridge_DailyDischarge_2021_July.dss"
test_dss_path="/Panchganga/RajaramBridge/FLOW/01Jan2021/1Day/ObservedDischarge/"
print(f"TestingDSSparserwithfile:{test_dss_file_path}andpath:{test_dss_path}")
extracted_data=read_dss_data(test_dss_file_path,test_dss_path)
ifextracted_data:
print(f"✅Successfullyextracted{len(extracted_data)}datapoints.")
print("First5rows:")
forrowinextracted_data[:5]:
print(row)
df=pd.DataFrame(extracted_data)
plt.figure(figsize=(10,5))
plt.plot(df["timestamp"],df["value"],marker="o")
plt.title("ObservedDischargeatRajaramBridge")
plt.xlabel("Date")
plt.ylabel("Discharge(cms)")
plt.grid(True)
plt.show()
else:
print("❌Nodataextracted.")
```

App\frontend-next-app\eslint.config.mjs:
```javascript
import{dirname}from"path";
import{fileURLToPath}from"url";
import{FlatCompat}from"@eslint/eslintrc";
const__filename=fileURLToPath(import.meta.url);
const__dirname=dirname(__filename);
constcompat=newFlatCompat({
baseDirectory:__dirname,
});
consteslintConfig=[
...compat.extends("next/core-web-vitals","next/typescript"),
];
exportdefaulteslintConfig;
```

App\frontend-next-app\src\app\data\page.tsx:
```typescript
'useclient';
importReact,{useState,useEffect}from'react';
import{ChartasChartJS,CategoryScale,LinearScale,PointElement,LineElement,Title,Tooltip,Legend}from'chart.js';
import{Line}from'react-chartjs-2';
//RegisterChart.jscomponents
ChartJS.register(CategoryScale,LinearScale,PointElement,LineElement,Title,Tooltip,Legend);
constDataPage=()=>{
const[chartData,setChartData]=useState<any>(null);
const[loading,setLoading]=useState<boolean>(true);
const[error,setError]=useState<string|null>(null);
useEffect(()=>{
constfetchData=async()=>{
try{
constresponse=awaitfetch('http://localhost:5000/api/upload-dss');
if(!response.ok){
thrownewError('Failedtofetchdatafromtheserver.Pleaseuploadafilefirst.');
}
constresult=awaitresponse.json();
constdata=result.data;
if(data&&data.length>0){
setChartData({
labels:data.map((d:any)=>newDate(d.timestamp).toLocaleString()),
datasets:[
{
label:'Discharge(cms)',
data:data.map((d:any)=>d.value),
borderColor:'rgba(75,192,192,1)',
backgroundColor:'rgba(75,192,192,0.2)',
fill:true,
tension:0.3,
},
],
});
}else{
setError('Nodataavailable.PleaseuploadaDSSfile.');
}
}catch(err:any){
setError(err.message);
console.error('Datafetcherror:',err);
}finally{
setLoading(false);
}
};
fetchData();
},[]);
consthandleDownload=()=>{
window.open('http://localhost:5000/api/download-csv');
};
constchartOptions={
responsive:true,
maintainAspectRatio:false,
plugins:{
legend:{
position:'top'asconst,
},
title:{
display:true,
text:'DischargeDatafromDSSFile',
},
},
scales:{
x:{
title:{
display:true,
text:'Date',
},
},
y:{
title:{
display:true,
text:'Discharge(cms)',
},
},
},
};
if(loading){
return(
<divclassName="d-flexjustify-content-centermt-5">
<divclassName="spinner-bordertext-primary"role="status">
<spanclassName="visually-hidden">Loading...</span>
</div>
</div>
);
}
if(error){
return(
<divclassName="alertalert-dangermt-5"role="alert">
{error}
</div>
);
}
return(
<divclassName="containermt-5">
<h1className="mb-4">ViewDSSData</h1>
<divclassName="cardshadow-smp-4">
{chartData?(
<>
<divstyle={{height:'400px',width:'100%'}}>
<Linedata={chartData}options={chartOptions}/>
</div>
<divclassName="d-flexjustify-content-centermt-4">
<buttonclassName="btnbtn-success"onClick={handleDownload}>
DownloadasCSV
</button>
</div>
</>
):(
<divclassName="alertalert-infotext-center"role="alert">
Nodatatodisplay.PleaseuploadaDSSfilefirstonthe"UploadData"page.
</div>
)}
</div>
</div>
);
};
exportdefaultDataPage;
```

App\frontend-next-app\src\app\layout.tsx:
```typescript
//src/app/layout.tsx
import'bootstrap/dist/css/bootstrap.css';
import'@fortawesome/fontawesome-svg-core/styles.css';
importtype{Metadata}from"next";
import{Geist,Geist_Mono}from"next/font/google";
import"./globals.css";
import{config}from'@fortawesome/fontawesome-svg-core';
config.autoAddCss=false;
//ImporttheNavbarcomponent
importNavbarfrom'../components/Navbar';
importBootstrapClientfrom'@/components/BootstrapClient';
constgeistSans=Geist({
variable:"--font-geist-sans",
subsets:["latin"],
});
constgeistMono=Geist_Mono({
variable:"--font-geist-mono",
subsets:["latin"],
});
exportconstmetadata:Metadata={
title:"FloodMonitorApp",
description:"MonitorandvisualizeflooddatawithHEC-RASDSSfiles.",
};
exportdefaultfunctionRootLayout({
children,
}:Readonly<{
children:React.ReactNode;
}>){
return(
<htmllang="en">
<bodyclassName={`${geistSans.variable}${geistMono.variable}`}>
{/*RendertheNavbaratthetopofthebody*/}
<Navbar/>
{/*Maincontentwillberenderedhere*/}
<mainclassName="container-fluidpy-4">
{children}
</main>
<BootstrapClient/>
</body>
</html>
);
}
```

App\frontend-next-app\src\app\page.tsx:
```typescript
importstylesfrom"./page.module.css";
exportdefaultfunctionHome(){
return(
<divclassName={styles.page}>
<h1className="text-success">FloodMonitorSystem</h1>
</div>
);
}
```

App\frontend-next-app\src\app\upload\page.tsx:
```typescript
'useclient';
importReact,{useState}from'react';
constUploadPage=()=>{
const[selectedFile,setSelectedFile]=useState<File|null>(null);
const[message,setMessage]=useState<string>('');
const[loading,setLoading]=useState<boolean>(false);
const[extractedData,setExtractedData]=useState<any[]|null>(null);
consthandleFileChange=(event:React.ChangeEvent<HTMLInputElement>)=>{
constfile=event.target.files?.[0]||null;
setSelectedFile(file);
setMessage(file?`Selectedfile:${file.name}`:'');
};
consthandleUpload=async()=>{
if(!selectedFile){
setMessage('Pleaseselectafilefirst.');
return;
}
setLoading(true);
setMessage('Uploadingandprocessing...');
setExtractedData(null);
constformData=newFormData();
formData.append('file',selectedFile);
try{
constresponse=awaitfetch('http://localhost:5000/api/upload-dss',{
method:'POST',
body:formData,
});
constresult=awaitresponse.json();
if(response.ok){
setMessage('Fileuploadedanddataextractedsuccessfully!');
setExtractedData(result.data);
}else{
setMessage(`Error:${result.error||'Somethingwentwrong.'}`);
}
}catch(error){
setMessage(`Failedtoconnecttotheserver.Pleasecheckthebackend.`);
console.error('Uploaderror:',error);
}finally{
setLoading(false);
}
};
return(
<divclassName="containermt-5">
<h1className="mb-4">UploadDSSFile</h1>
<divclassName="cardshadow-smp-4">
<divclassName="mb-3">
<labelhtmlFor="dssFile"className="form-label">
ChooseDSSFile:
</label>
<input
className="form-control"
type="file"
id="dssFile"
accept=".dss"
onChange={handleFileChange}
/>
</div>
<button
className="btnbtn-primary"
onClick={handleUpload}
disabled={loading||!selectedFile}
>
{loading?(
<>
<spanclassName="spinner-borderspinner-border-smme-2"role="status"aria-hidden="true"></span>
Uploading...
</>
):(
'UploadandProcess'
)}
</button>
{message&&(
<divclassName={`mt-3alert${message.startsWith('Error')||message.startsWith('Failed')?'alert-danger':'alert-info'}`}>
{message}
</div>
)}
</div>
{extractedData&&(
<divclassName="mt-5">
<h2>ExtractedData</h2>
<p>Displayingfirst5datapoints:</p>
<divclassName="table-responsive">
<tableclassName="tabletable-borderedtable-striped">
<theadclassName="table-dark">
<tr>
<th>Timestamp</th>
<th>Value</th>
</tr>
</thead>
<tbody>
{extractedData.slice(0,5).map((item,index)=>(
<trkey={index}>
<td>{newDate(item.timestamp).toLocaleString()}</td>
<td>{item.value}</td>
</tr>
))}
</tbody>
</table>
</div>
</div>
)}
</div>
);
};
exportdefaultUploadPage;
```

App\frontend-next-app\src\components\BootstrapClient.tsx:
```typescript
'useclient';
import{useEffect}from'react';
constBootstrapClient=()=>{
useEffect(()=>{
require('bootstrap/dist/js/bootstrap.bundle.min.js');
},[]);
returnnull;
};
exportdefaultBootstrapClient;
```

App\frontend-next-app\src\components\Navbar.tsx:
```typescript
//src/components/Navbar.tsx
'useclient';
importLinkfrom'next/link';
import{usePathname}from'next/navigation';
import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';
import{faCloudArrowUp,faChartLine,faBell}from'@fortawesome/free-solid-svg-icons';
constNavbar=()=>{
constpathname=usePathname();
return(
<navclassName="navbarnavbar-expand-lgnavbar-darkbg-darksticky-top">
<divclassName="container-fluid">
<Linkhref="/"passHreflegacyBehavior>
<aclassName="navbar-brand">
<spanclassName="d-noned-sm-inline">FloodMonitor</span>
<spanclassName="d-sm-none">FMA</span>
</a>
</Link>
<button
className="navbar-toggler"
type="button"
data-bs-toggle="collapse"
data-bs-target="#navbarNav"
aria-controls="navbarNav"
aria-expanded="false"
aria-label="Togglenavigation"
>
<spanclassName="navbar-toggler-icon"></span>
</button>
<divclassName="collapsenavbar-collapse"id="navbarNav">
<ulclassName="navbar-navme-automb-2mb-lg-0">
<liclassName="nav-item">
<Linkhref="/upload"passHreflegacyBehavior>
<aclassName={`nav-link${pathname==='/upload'?'active':''}`}>
<FontAwesomeIconicon={faCloudArrowUp}className="me-2"/>
UploadData
</a>
</Link>
</li>
<liclassName="nav-item">
<Linkhref="/data"passHreflegacyBehavior>
<aclassName={`nav-link${pathname==='/data'?'active':''}`}>
<FontAwesomeIconicon={faChartLine}className="me-2"/>
ViewData
</a>
</Link>
</li>
<liclassName="nav-item">
<Linkhref="/alerts"passHreflegacyBehavior>
<aclassName={`nav-link${pathname==='/alerts'?'active':''}`}>
<FontAwesomeIconicon={faBell}className="me-2"/>
Alerts
</a>
</Link>
</li>
</ul>
</div>
</div>
</nav>
);
};
exportdefaultNavbar;
```

